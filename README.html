<?xml version="1.0" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>dstar-gantry - convenience wrapper for container-based dstar corpus operations</title>
<link rel="stylesheet" href="perlpod.css" type="text/css" />
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<link rev="made" href="mailto:root@localhost" />
</head>

<body>



<ul id="index">
  <li><a href="#NAME">NAME</a></li>
  <li><a href="#SYNOPSIS">SYNOPSIS</a></li>
  <li><a href="#DESCRIPTION">DESCRIPTION</a></li>
  <li><a href="#INSTALLATION">INSTALLATION</a>
    <ul>
      <li><a href="#Requirements">Requirements</a></li>
      <li><a href="#Installation-Procedure">Installation Procedure</a></li>
    </ul>
  </li>
  <li><a href="#USAGE">USAGE</a>
    <ul>
      <li><a href="#Gantry-Options">Gantry Options</a>
        <ul>
          <li><a href="#h--help">-h, -help</a></li>
          <li><a href="#n--dry-run">-n, -dry-run</a></li>
          <li><a href="#c-CORPUS">-c CORPUS</a></li>
          <li><a href="#d-DSTAR_ROOT">-d DSTAR_ROOT</a></li>
          <li><a href="#C-CORPUS_ROOT">-C CORPUS_ROOT</a></li>
          <li><a href="#S-CORPUS_SRC">-S CORPUS_SRC</a></li>
          <li><a href="#R-RESOURCES_DIR">-R RESOURCES_DIR</a></li>
          <li><a href="#RO">-RO</a></li>
          <li><a href="#f-RCFILE">-f RCFILE</a></li>
          <li><a href="#i-IMAGE">-i IMAGE</a></li>
          <li><a href="#e-VAR-VALUE">-e VAR=VALUE</a></li>
          <li><a href="#E-ENV_FILE">-E ENV_FILE</a></li>
          <li><a href="#v-PATH:-MOUNT">-v /PATH:/MOUNT</a></li>
          <li><a href="#x-CABX_RUN">-x CABX_RUN</a></li>
          <li><a href="#p-HTTP_PORT">-p HTTP_PORT</a></li>
          <li><a href="#u-USER">-u USER</a></li>
          <li><a href="#g-GROUP">-g GROUP</a></li>
        </ul>
      </li>
      <li><a href="#Gantry-Actions">Gantry Actions</a>
        <ul>
          <li><a href="#init">init</a></li>
          <li><a href="#sync-host">sync-host</a></li>
          <li><a href="#sync-self">sync-self</a></li>
          <li><a href="#sync">sync</a></li>
          <li><a href="#pull">pull</a></li>
          <li><a href="#gc">gc</a></li>
          <li><a href="#BUILD_ACTION">BUILD_ACTION...</a></li>
        </ul>
      </li>
      <li><a href="#Docker-Options">Docker Options</a></li>
      <li><a href="#Container-Actions">Container Actions</a>
        <ul>
          <li><a href="#help">help</a></li>
          <li><a href="#self-test">self-test</a></li>
          <li><a href="#build">build</a></li>
          <li><a href="#update">update</a></li>
          <li><a href="#update-meta">update-meta</a></li>
          <li><a href="#test">test</a></li>
          <li><a href="#archive-build">archive-build</a></li>
          <li><a href="#archive-publish">archive-publish</a></li>
          <li><a href="#install">install</a></li>
          <li><a href="#publish">publish</a></li>
          <li><a href="#run">run</a></li>
          <li><a href="#exec-CMD">exec CMD</a></li>
        </ul>
      </li>
      <li><a href="#Container-Environment-Variables">Container Environment Variables</a>
        <ul>
          <li><a href="#SSH_AUTH_SOCK">SSH_AUTH_SOCK</a></li>
          <li><a href="#dstar_init_hooks">dstar_init_hooks</a></li>
          <li><a href="#dstar_build_uid">dstar_build_uid</a></li>
          <li><a href="#dstar_build_gid">dstar_build_gid</a></li>
          <li><a href="#dstar_build_umask">dstar_build_umask</a></li>
          <li><a href="#dstar_corpora">dstar_corpora</a></li>
          <li><a href="#dstar_corpus">dstar_corpus</a></li>
          <li><a href="#dstar_archive_dir">dstar_archive_dir</a></li>
          <li><a href="#dstar_sync_resources">dstar_sync_resources</a></li>
          <li><a href="#dstar_sync_rcfiles">dstar_sync_rcfiles</a></li>
          <li><a href="#dstar_checkout_corpus_opts">dstar_checkout_corpus_opts</a></li>
          <li><a href="#dstar_build_sh_opts">dstar_build_sh_opts</a></li>
          <li><a href="#dstar_cabx_run">dstar_cabx_run</a></li>
          <li><a href="#dstar_relay_conf">dstar_relay_conf</a></li>
          <li><a href="#VAR">VAR</a></li>
        </ul>
      </li>
    </ul>
  </li>
  <li><a href="#"></a>
    <ul>
      <li><a href="#Gantry-Configuration-Variables">Gantry Configuration Variables</a></li>
    </ul>
  </li>
  <li><a href="#EXAMPLES">EXAMPLES</a>
    <ul>
      <li><a href="#TODO-CONTINUE-HERE">TODO CONTINUE HERE</a></li>
    </ul>
  </li>
  <li><a href="#CAVEATS">CAVEATS</a>
    <ul>
      <li><a href="#docker-storage-drivers">docker storage drivers</a></li>
      <li><a href="#build-responsibly">build responsibly</a></li>
      <li><a href="#log-changes">log changes</a></li>
    </ul>
  </li>
  <li><a href="#SEE-ALSO">SEE ALSO</a></li>
  <li><a href="#AUTHOR">AUTHOR</a></li>
</ul>

<h1 id="NAME">NAME</h1>

<p>dstar-gantry - convenience wrapper for container-based dstar corpus operations</p>

<h1 id="SYNOPSIS">SYNOPSIS</h1>

<pre><code> dstar-gantry.sh [GANTRY_OPTS] [GANTRY_ACTION(s)] [-- [DOCKER_OPTS] [-- [BUILD_ARGS]]]

 dstar-gantry.sh Options (GANTRY_OPTS):
   -h, -help             # this help message
   -n, -dry-run          # just print what we would do
   -c CORPUS             # dstar corpus label (required for most operations)
   -d DSTAR_ROOT         # host path for sparse persistent dstar superstructure (default=$HOME/dstar)
   -C CORPUS_ROOT        # host path for dstar corpus checkout (default=DSTAR_ROOT/corpora/CORPUS)
   -S CORPUS_SRC         # host path of dstar corpus sources (default=DSTAR_ROOT/sources/CORPUS/(current/) if present)
   -R RESOURCES_DIR      # host path for persistent CAB resources (default=DSTAR_ROOT/resources/ if present)
   -RO                   # mount RESOURCES_DIR read-only (suppress resource synchronization by container)
   -f RCFILE             # read gantry variables from RCFILE (bash source; default=$HOME/.dstar-gantry.rc)
   -i IMAGE              # use docker image IMAGE (default=lex.dwds.de:443/dstar/dstar-buildhost:latest)
   -e VAR=VALUE          # environment variables are passed to docker-run(1) -e
   -E ENV_FILE           # environment files are passed to docker-run(1) --env-file
   -v /PATH:/MOUNT       # volume options are are passed to docker-run(1) -v
   -x CABX_RUN           # cabx servers for container &#39;run&#39; action (default=dstar-http-9096)
   -p HTTP_PORT          # map container port 80 to host HTTP_PORT for &#39;run&#39; action
   -u USER               # build user or UID (default=ddc-admin)
   -g GROUP              # build group or GID (default=ddc-admin)

 dstar-gantry.sh Actions (GANTRY_ACTION(s)):
   init                  # (re-)initialize persistent sparse local DSTAR_ROOT checkout
   sync-host             # syncronize local DSTAR_ROOT checkout via `svn update`
   sync-self             # syncronize local DSTAR_ROOT checkout via `svn update`
   sync                  # alias for &#39;sync-host&#39; and &#39;sync-self&#39;
   pull                  # retrieve selected IMAGE from docker registry (may require `docker login`)
   gc                    # clean up stale local dstar-buildhost docker images
   ...                   # other actions are passed to container docker/build script (see below)

 Docker Options (DOCKER_OPTS): see docker-run(1).

 Container docker/build Arguments (BUILD_ARGS; see also `dstar-gantry.sh help`):
   help                  # show help for container docker/build script
   self-test             # run rudimentary self-test(s)
   build                 # index a corpus in CORPUS_ROOT/build from sources in CORPUS_SRC/
   update                # update an existing index in CORPUS_ROOT/build/ from CORPUS_SRC/
   update-meta           # update index metadata in in CORPUS_ROOT/build/ from CORPUS_SRC/
   test                  # test a corpus build in CORPUS_ROOT/build/
   archive-build         # archive CORPUS_ROOT/build/ to ${dstar_archive_dir}
   archive-publish       # archive publishable corpus data to ${dstar_archive_dir}
   install               # install CORPUS_ROOT/build/ to CORPUS_ROOT/{server,web}/
   publish               # deploy CORPUS_ROOT/build/ to production host(s)
   run                   # run CORPUS_ROOT/{server,web}/ corpus instance in container
   exec CMD...           # just execute CMD... in container

 Useful container mounts under /dstar:
  config/                # global dstar configuration (read-only)
  resources/             # CAB analysis resources (read-only)
  sources/CORPUS/        # corpus TEI-XML sources (read-only)
  corpora/CORPUS/        # corpus instance checkout (read-write, required)
  corpora/CORPUS/config.local
                         # local corpus configuration overrides

 Host Environment Variables:
   SSH_AUTH_SOCK         # (required) ssh-agent(1) socket

 Container Environment Variables:
  SSH_AUTH_SOCK               # ssh-agent socket (should probably be a bind-mount)
  dstar_init_hooks            # default INIT_HOOK_DIRS (=)

  dstar_build_uid             # user-id in host system (=`id -u`)
  dstar_build_gid             # group-id in host system (=`id -g`)
  dstar_build_umask           # umask for build process (=002)

  dstar_corpora               # corpora to operate on (whitespace-separated list)
  dstar_corpus                # alias for dstar_corpora (=)
  dstar_archive_dir           # target directory for archive-* targets (=)

  dstar_sync_resources        # sync resources (auto|no|force; default=auto)
  dstar_sync_rcfiles          # resources to be synchronized (default:empty -&gt; all)
  dstar_checkout_corpus_opts  # options for dstar-checkout-corpus.sh (=-force -local-config)
  dstar_build_sh_opts         # options for CORPUS/build/build.sh (=-echo-preset=make-info)
  dstar_cabx_run              # cabx expanders to run (=dstar-http-9096)
  dstar_relay_conf            # socat relay configuration (=/etc/default/dstar-relay)

  ...                         # all environment variables are passed down to child processes (e.g. make)</code></pre>

<h1 id="DESCRIPTION">DESCRIPTION</h1>

<p>The <code>dstar-gantry</code> project provides a thin top-level wrapper script (<code>dstar-gantry.sh</code>) for D* corpus operations using the latest <code>dstar-buildhost</code> docker image pulled from the ZDL docker registry at <code>https://lex.dwds.de:443</code>. The <code>dstar-buildhost</code> docker container invoked by <code>dstar-gantry.sh</code> can simulate any of the <a href="https://kaskade.dwds.de/dstar/doc/README.html#BUILDHOST"><code>BUILDHOST</code></a>, <a href="https://kaskade.dwds.de/dstar/doc/README.html#RUNHOST"><code>RUNHOST</code></a>, and/or <a href="https://kaskade.dwds.de/dstar/doc/README.html#WEBHOST"><code>WEBHOST</code></a> D* host roles, but is mostly intended to act as a (virtual) <code>BUILDHOST</code>.</p>

<p>See <a href="#INSTALLATION">&quot;INSTALLATION&quot;</a> for instructions on installing <code>dstar-gantry</code> on your local machine, see <a href="#USAGE">&quot;USAGE&quot;</a> for details on the various options and arguments, and see <a href="#EXAMPLES">&quot;EXAMPLES&quot;</a> for some example <code>dstar-gantry.sh</code> calls.</p>

<h1 id="INSTALLATION">INSTALLATION</h1>

<p>This section describes the installation procedure for debian-based linux machines. <code>dstar-gantry</code> was developed and tested on an x86_64 machine running Debian GNU/Linux 10 (buster). You can probably run gantry on other architectures, but I can&#39;t tell you how to do that.</p>

<h2 id="Requirements">Requirements</h2>

<dl>

<dt id="debian-packages">debian packages</dt>
<dd>

<pre><code> bash
 openssh-client
 subversion</code></pre>

</dd>
<dt id="docker">docker</dt>
<dd>

<p>You will need <a href="https://docs.docker.com/get-docker/">docker</a> installed on your local machine with an appropriate <a href="#docker-storage-drivers">docker storage driver</a>, and the requisite <a href="https://docs.docker.com/engine/install/linux-postinstall/">permissions</a> for your local user account. <code>dstar-gantry</code> was developed and tested using the <code>docker-ce</code> and <code>docker-ce-client</code> packages version 19.03.8.</p>

</dd>
<dt id="registry-credentials">registry credentials</dt>
<dd>

<p>If you wish to make use of gantry&#39;s <code>pull</code> action to acquire the lastest <code>dstar-buildhost</code> docker image (recommended), you will need credentials (username and password) for the ZDL docker registry, and will need to manually log into the registry using <a href="https://docs.docker.com/engine/reference/commandline/login/"><code>docker login</code></a>:</p>

<pre><code> $ docker login https://lex.dwds.de:443
 Username: zdl
 Password: XXXXXXX
 Login Succeeded</code></pre>

</dd>
<dt id="ssh-agent">ssh-agent</dt>
<dd>

<p>You will need an accessible <a href="https://en.wikipedia.org/wiki/Ssh-agent">ssh-agent</a> for your local user account as indicated by the <code>SSH_AUTH_SOCK</code> environment variable, with at least one registered identity (public+private key-pair).</p>

<p>In order to avoid password prompts during sparse subversion checkouts on the local host (recommended), your ssh identity should be authorized for password-free access to <code>odo.dwds.de</code>, as whatever user your <a href="https://linux.die.net/man/5/ssh_config"><code>~/.ssh/config</code></a> specifies (by default the same username as on your local machine).</p>

<p>In order to avoid password prompts during implicit subversion operations in the <code>dstar-buildhost</code> container invoked by gantry (recommended), your ssh identity should be authorized for password-free access to <code>ddc@odo.dwds.de</code>.</p>

<p>If you wish to make use of gantry&#39;s automatic resource synchronization features (default, recommended), your identity should be authorized for password-free access to <code>${CABRC_RSYNC_USER}@${CABRC_SYNCHOST}</code> (typically <code>ddc@data.dwds.de</code>).</p>

<p>In order to publish corpus indices via gantry to remote RUNHOSTs and/or WEBHOSTs, your identity will need to be authorized for password-free access to <code>${PUBLISH_DEST}</code> and/or <code>${WEB_PUBLISH_DEST}</code> (typically <code>ddc-admin@{data,kaskade}.dwds.de</code>).</p>

<p>See <a href="https://kaskade.dwds.de/dstar/doc/README_ssh.html"><code>dstar/doc/README_ssh.txt</code></a> for more details.</p>

</dd>
</dl>

<h2 id="Installation-Procedure">Installation Procedure</h2>

<dl>

<dt id="download-gantry">download gantry</dt>
<dd>

<p>Checkout the gantry project itself from SVN to your local machine, for example to $HOME/dstar-gantry:</p>

<pre><code> $ svn checkout svn+ssh://odo.dwds.de/home/svn/dev/ddc-dstar/docker/gantry/trunk ~/dstar-gantry</code></pre>

<p>Example output (trimmed):</p>

<pre><code> A    ~/dstar-gantry/bin
 A    ~/dstar-gantry/bin/dstar-gantry.sh
 ...
 Checked out revision 32806.</code></pre>

</dd>
<dt id="setup-PATH">setup PATH</dt>
<dd>

<p>Put the <code>dstar-gantry.sh</code> script in your <code>PATH</code> (optional, recommended):</p>

<pre><code> $ export PATH=$PATH:$HOME/dstar-gantry/bin</code></pre>

<p>... or just symlink it into some directory already in your <code>PATH</code>:</p>

<pre><code> $ sudo ln -s $HOME/dstar-gantry/bin/*.sh /usr/local/bin</code></pre>

</dd>
<dt id="initialize-persistent-data">initialize persistent data</dt>
<dd>

<p>Initialize persistent sparse local dstar checkout in $HOME/dstar:</p>

<pre><code> $ dstar-gantry.sh init</code></pre>

<p>Example output (trimmed):</p>

<pre><code> dstar-gantry.sh: INFO: init: (re-)initializing sparse persistent DSTAR_ROOT=/home/USER/dstar
 dstar-gantry.sh: CMD: svn co --depth=files svn+ssh://odo.dwds.de/home/svn/dev/ddc-dstar/trunk /home/USER/dstar
 A    /home/USER/dstar/.DSTAR_ROOT
 ...
 dstar-gantry.sh: INFO: no container actions BUILD_ARG(s) specified: nothing to do.</code></pre>

</dd>
<dt id="retrieve-docker-image">retrieve docker image</dt>
<dd>

<p>Download the latest <code>dstar-buildhost</code> image from the ZDL docker registry:</p>

<pre><code> $ dstar-gantry.sh pull</code></pre>

<p>Example output (trimmed):</p>

<pre><code> dstar-gantry.sh: CMD: docker pull lex.dwds.de:443/dstar/dstar-buildhost:latest
 latest: Pulling from dstar/dstar-buildhost
 
 Digest: sha256:e5b47f225619e6b433df0dbcdcdfdfdb93e703893ceb6ed9f78f338e77358a77
 Status: Downloaded newer image for lex.dwds.de:443/dstar/dstar-buildhost:latest
 lex.dwds.de:443/dstar/dstar-buildhost:latest
 dstar-gantry.sh: INFO: no container actions BUILD_ARG(s) specified: nothing to do.</code></pre>

</dd>
<dt id="run-self-test">run self-test</dt>
<dd>

<p>Run rudimentary self-tests:</p>

<pre><code> $ dstar-gantry.sh self-test</code></pre>

<p>Example output (trimmed):</p>

<pre><code> dstar-gantry.sh: INFO: using DSTAR_ROOT=/home/USER/dstar
 dstar-gantry.sh: WARNING: neither CORPUS nor CORPUS_ROOT specified (use the -c or -C options)
 dstar-gantry.sh: WARNING: no CORPUS_SRC directory specified (expect trouble if you&#39;re trying to (re-)index a corpus)
 dstar-gantry.sh: INFO: setting RESOURCE_DIR=/local/home/ddc-dstar/dstar/resources
 dstar-gantry.sh: WARNING: CORPUS_ROOT= does not exist (continuing anyway, YMMV)
 dstar-gantry.sh: CMD: docker run --rm -ti --name=dstar-gantry- -v/run/user/1000/ssh-agent.sock:/tmp/ssh-auth-gantry.sock -eSSH_AUTH_SOCK=/tmp/ssh-auth-gantry.sock -v/local/home/ddc-dstar/dstar/resources:/dstar/resources -edstar_build_uid=1008 -edstar_build_gid=1008 -eDSTAR_USER=moocow -edstar_cabx_run=dstar-http-9096 -edstar_corpora= lex.dwds.de:443/dstar/dstar-buildhost:latest /dstar/docker/build self-test
 ...
 build INFO: running self-test(s)
 build INFO: TEST: checking for ssh-agent socket (dstar-nice.sh test -w &#39;/tmp/ssh-agent-wrap.sock&#39;)
 build INFO: TEST: checking for ssh-agent identity (test -n &quot;`dstar-nice.sh ssh-add -l | fgrep -v \&quot;no identities\&quot;`&quot;)
 build INFO: TEST: svn+ssh access (dstar-nice.sh svn st -u .DSTAR_ROOT)
 Status against revision:  32806
 build INFO: TEST: sync resources (dstar-nice.sh make -C resources sync-test)
 make: Entering directory &#39;/home/ddc-dstar/dstar/resources&#39;
 make: Leaving directory &#39;/home/ddc-dstar/dstar/resources&#39;
 build INFO: TEST: publish to default runhost (ssh &quot;ddc-admin@data.dwds.de&quot; /bin/true)
 build INFO: TEST: publish to default webhost (ssh &quot;ddc-admin@kaskade.dwds.de&quot; /bin/true)
 build INFO: self-test: all tests passed (6/6)</code></pre>

</dd>
</dl>

<h1 id="USAGE">USAGE</h1>

<pre><code> dstar-gantry.sh [GANTRY_OPTS] [GANTRY_ACTION(s)] [-- [DOCKER_OPTS] [-- [BUILD_ARGS]]]</code></pre>

<p>The <code>dstar-gantry.sh</code> wrapper script is a command-line tool in the UNIX tradition, and as such accepts a number of options and arguments:</p>

<dl>

<dt id="GANTRY_OPTS"><a href="#Gantry-Options">GANTRY_OPTS</a></dt>
<dd>

<p><code>GANTRY_OPTS</code> options are interpreted by the <code>dstar-gantry.sh</code> script itself, including some convenience wrappers for some common <a href="#Docker-Options">&quot;Docker Options&quot;</a>.</p>

</dd>
<dt id="GANTRY_ACTION-s"><a href="#Gantry-Actions">GANTRY_ACTION(s)</a></dt>
<dd>

<p><code>GANTRY_ACTION(s)</code> indicate which operation(s) are to be performed, typically corresponding directly to the <a href="#Container-Actions">&quot;Container Actions&quot;</a> of the same name.</p>

</dd>
<dt id="DOCKER_OPTS"><a href="#Docker-Options">DOCKER_OPTS</a></dt>
<dd>

<p><code>DOCKER_OPTS</code> are passed to the <a href="https://docs.docker.com/engine/reference/run/"><code>docker-run</code></a> subprocess.</p>

</dd>
<dt id="BUILD_ARGS"><a href="#Container-Arguments">BUILD_ARGS</a></dt>
<dd>

<p><code>BUILD_ARGS</code> are passed to the <code>/dstar/docker/build</code> script in the invoked <code>dstar-buildhost</code> container.</p>

</dd>
</dl>

<h2 id="Gantry-Options">Gantry Options</h2>

<h3 id="h--help">-h, -help</h3>

<p>Display a brief help message.</p>

<h3 id="n--dry-run">-n, -dry-run</h3>

<p>If specified, just prints what would have been done, but doesn&#39;t perform any destructive actions.</p>

<h3 id="c-CORPUS">-c CORPUS</h3>

<p>Specifies the dstar corpus label (&quot;collection label&quot;) for the operand corpus. Required for most operations.</p>

<h3 id="d-DSTAR_ROOT">-d DSTAR_ROOT</h3>

<p>Specifies the host path used for (sparse) persistent dstar superstructure (default=<code>$HOME/dstar</code>). By default, persistent CAB resources and index data will be created here. The directory will be a sparse checkout of the <code>dstar project|https://kaskade.dwds.de/dstar/doc/README.html#Project-Directory-Structure</code> containing only partial checkouts of the <a href="https://kaskade.dwds.de/dstar/doc/README.html#doc"><code>doc/</code></a>, <a href="https://kaskade.dwds.de/dstar/doc/README.html#corpora"><code>corpora/</code></a>, <a href="https://kaskade.dwds.de/dstar/doc/README.html#sources"><code>sources/</code></a>, and <a href="https://kaskade.dwds.de/dstar/doc/README.html#resources"><code>resources/</code></a> subdirectories.</p>

<h3 id="C-CORPUS_ROOT">-C CORPUS_ROOT</h3>

<p>Specifies the host path used for dstar corpus checkout (default=<code><a href="#d-DSTAR_ROOT">DSTAR_ROOT</a>/corpora/<a href="#c-CORPUS">CORPUS</a></code>). Implies <a href="#v-PATH:-MOUNT"><code>-v CORPUS_ROOT:/dstar/corpora/CORPUS</code></a>. If a subdirectory <code>CORPUS_ROOT/config.local/</code> exists, it will be treated as a (sparse) local set of dstar-configuration overrides for <a href="#c-CORPUS"><code>CORPUS</code></a> and merged into a pure-local configuration directorsy <code>CORPUS_ROOT/config/</code> by implicit calls to <code>dstar-checkout-corpus.sh</code>.</p>

<h3 id="S-CORPUS_SRC">-S CORPUS_SRC</h3>

<p>Specifies the host path where dstar corpus sources reside (default=<code><a href="#d-DSTAR_ROOT">DSTAR_ROOT</a>/sources/<a href="#c-CORPUS">CORPUS</a>/current/</code> if present, otherwise <code><a href="#d-DSTAR_ROOT">DSTAR_ROOT</a>/sources/<a href="#c-CORPUS">CORPUS</a>/</code> if present, otherwise required). Implies <a href="#v-PATH:-MOUNT"><code>-v CORPUS_SRC:/dstar/sources/CORPUS:ro</code></a>.</p>

<h3 id="R-RESOURCES_DIR">-R RESOURCES_DIR</h3>

<p>Specifies the host path for persistent CAB resources (default=<code><a href="#d-DSTAR_ROOT">DSTAR_ROOT</a>/resources/</code> if present). Implies <a href="#v-PATH:-MOUNT"><code>-v RESOURCES_DIR:/dstar/resources</code></a>.</p>

<h3 id="RO">-RO</h3>

<p>If the <code>-RO</code> option is specified and <code><a href="#R-RESOURCES_DIR">RESOURCES_DIR</a></code> is present on the local machine, then <code><a href="#R-RESOURCES_DIR">RESOURCES_DIR</a></code> will be mounted read-only in the container, which suppresses resource synchronization in the running container. If you want each container invocation to ensure that its CAB resources are fully up-to-date, you should <b>NOT</b> use this option. It can be useful to bypass synchronization overhead, minimize network bandwidth, and ensure resource consistency for post-hoc updates of existing corpora though. Use with consideration.</p>

<h3 id="f-RCFILE">-f RCFILE</h3>

<p>Reads gantry configuration variables from <code>RCFILE</code> on the host machine. <code>RCFILE</code> is evaluated as bash source. May be specified more than once, in which case files are read in the order specified and later declarations may clobber earlier ones. By default, <code>dstar-gantry.sh</code> reads the following global configuration files (if they exist) before evaluating any <code>RCFILE</code> specified on the command-line:</p>

<pre><code> /etc/dstar-gantry.rc
 $HOME/.dstar-gantry.rc</code></pre>

<p>See <a href="#Gantry-Configuration-Variables">&quot;Gantry Configuration Variables&quot;</a> for a list of known gantry configuration variables you can set here.</p>

<h3 id="i-IMAGE">-i IMAGE</h3>

<p>Specifies the docker image to be <a href="#pull">pulled</a> and/or invoked via <a href="https://docs.docker.com/engine/reference/run/"><code>docker run</code></a>. Default is <code>lex.dwds.de:443/dstar/dstar-buildhost:latest</code>.</p>

<h3 id="e-VAR-VALUE">-e VAR=VALUE</h3>

<p>Specify an environment variable override for the container via <a href="https://docs.docker.com/engine/reference/run/#env-environment-variables"><code>docker run -e VAR=VALUE</code></a>.</p>

<h3 id="E-ENV_FILE">-E ENV_FILE</h3>

<p>Specify a file containing environment variable overrides for the container, via <a href="https://docs.docker.com/engine/reference/run/#env-environment-variables"><code>docker run --env-file ENV_FILE</code></a>.</p>

<h3 id="v-PATH:-MOUNT">-v /PATH:/MOUNT</h3>

<p>Mounts the host directory <code>/PATH</code> as a volume into the container at <code>/MOUNT</code>, passed to <a href="https://docs.docker.com/engine/reference/run/#volume-shared-filesystems"><code>docker_run -v</code></a>.</p>

<p>Potentially useful volume mounts <code>/MOUNT</code> include:</p>

<pre><code>  /dstar/config/            # global dstar configuration (read-only)
  /dstar/resources/         # CAB analysis resources (read-only)</code></pre>

<h3 id="x-CABX_RUN">-x CABX_RUN</h3>

<p>Select container-internal CAB server(s) to start for container <a href="#run">run</a> action; default=<code>dstar-http-9096</code>.</p>

<h3 id="p-HTTP_PORT">-p HTTP_PORT</h3>

<p>Map containers port 80 to host port <code>HTTP_PORT</code> for <a href="#run"><code>run</code></a> action via <a href="https://docs.docker.com/engine/reference/run/#expose-incoming-ports"><code>docker run -p HTTP_PORT:80</code></a>.</p>

<h3 id="u-USER">-u USER</h3>

<p>Specifies username or UID of host build user (default=<code>ddc-admin</code> if present, otherwise current user). If the UID does not exist in the container (it probably doesn&#39;t), it will be created.</p>

<h3 id="g-GROUP">-g GROUP</h3>

<p>Specifies group name or GID of host build user (default=<code>ddc-admin</code> if present, otherwise current group). If the GID does not exist in the container (it probably doesn&#39;t), it will be created.</p>

<h2 id="Gantry-Actions">Gantry Actions</h2>

<h3 id="init">init</h3>

<p>(Re-)initializes persistent sparse local <a href="#d-DSTAR_ROOT"><code>DSTAR_ROOT</code></a> checkout on the local host (usually <code>$HOME/dstar</code>). You should only have to call this once per host, before performing any other <code>dstar-gantry.sh</code> actions.</p>

<h3 id="sync-host">sync-host</h3>

<p>Synchronizes the persistent sparse local <a href="#d-DSTAR_ROOT"><code>DSTAR_ROOT</code></a> checkout on the local host (usually <code>$HOME/dstar</code>) via <code>svn update</code>. You should typically call this before each <code>dstar-gantry.sh</code> session, in order to ensure that your <code><a href="#d-DSTAR_ROOT">DSTAR_ROOT</a></code> checkout is up-to-date.</p>

<h3 id="sync-self">sync-self</h3>

<p>Attempts to synchronize the local <code>dstar-gantry</code> checkout via <code>svn update</code>. If the <code>dstar-gantry.sh</code> script (or symlink) does not resolve to an SVN working copy on your system, this won&#39;t work, and you will need to perform any updates manually. You should typically call this before each <code>dstar-gantry.sh</code> operation, in order to ensure that your <code>dstar-gantry.sh</code> itself is up-to-date.</p>

<h3 id="sync">sync</h3>

<p>Convenience alias for the <a href="#sync-host">&quot;sync-host&quot;</a> and <a href="#sync-self">&quot;sync-self&quot;</a> actions.</p>

<h3 id="pull">pull</h3>

<p>Retrieves the selected <a href="#i-IMAGE"><code>dstar-buildhost</code> IMAGE</a> from the ZDL docker registry. May require a preceding <a href="#registry-credentials"><code>docker login</code></a>.</p>

<h3 id="gc">gc</h3>

<p>Cleans up stale <code>dstar-buildhost</code> docker images on the local host.</p>

<h3 id="BUILD_ACTION"><a href="#Container-Actions">BUILD_ACTION...</a></h3>

<p>Other non-option arguments (not beginning with a dash &quot;-&quot;) are passed verbatim as <a href="#Container-Actions">&quot;Container Actions&quot;</a> to the <code>/dstar/docker/build</code> script in the suborinate container.</p>

<h2 id="Docker-Options">Docker Options</h2>

<p>Docker options following the first <code>--</code> on the <code>dstar-gantry.sh</code> command-line are passed verbatim to the <a href="https://docs.docker.com/engine/reference/run/"><code>docker run</code></a> subprocess for the selected <a href="#i-IMAGE"><code>dstar-buildhost</code> IMAGE</a>. If you need to tweak the <code>docker run</code> call with more than the <a href="#e-VAR-VALUE"><code>-e VAR=VALUE</code></a>, <a href="#E-ENV_FILE"><code>-E ENV_FILE</code></a>, or <a href="#v-PATH:-MOUNT"><code>-v /PATH:/MOUNT</code></a> options, this is how to do it.</p>

<h2 id="Container-Actions">Container Actions</h2>

<p>All arguments following the second <code>--</code> on the <code>dstar-gantry.sh</code> command-line are passed verbatim to the <code>/dstar/docker/build</code> script call in the subordinate <a href="#i-IMAGE"><code>dstar-buildhost</code></a> container. See the output of <code>dstar-gantry.sh help</code> for a synopsis of the <code>/dstar/docker/build</code> calling conventions.</p>

<h3 id="help">help</h3>

<p>Shows a brief help message from the container <code>/dstar/docker/build</code> script.</p>

<h3 id="self-test">self-test</h3>

<p>Runs some rudimentary self-test(s) and reports results. Not all self-tests need to pass in order for <code>dstar-gantry.sh</code> to be useful; the functionality you need depends on what you&#39;re trying to do and your personal preferences.</p>

<h3 id="build">build</h3>

<p>(Re-)indexes a corpus in <code><a href="#C-CORPUS_ROOT">CORPUS_ROOT</a>/build/</code> from TEI-XML sources in <a href="#S-CORPUS_SRC"><code>CORPUS_SRC/</code></a>. This is basically a wrapper for <a href="https://kaskade.dwds.de/dstar/doc/HOWTO.html#Corpus-Checkout"><code>dstar-checkout-corpus.sh</code></a> and <a href="https://kaskade.dwds.de/dstar/doc/HOWTO.html#build.sh-and-cron-autobuild.sh"><code>CORPUS_ROOT/build/build.sh -build</code></a>, i.e. a <a href="https://kaskade.dwds.de/dstar/doc/talks/corpus-ops-2019/#howto-build">full corpus re-build</a>.</p>

<h3 id="update">update</h3>

<p>Updates an existing corpus index in <code><a href="#C-CORPUS_ROOT">CORPUS_ROOT</a>/build/</code> from TEI-XML sources in <a href="#S-CORPUS_SRC"><code>CORPUS_SRC/</code></a>. This is basically a wrapper for <a href="https://kaskade.dwds.de/dstar/doc/HOWTO.html#Corpus-Checkout"><code>dstar-checkout-corpus.sh</code></a> and <a href="https://kaskade.dwds.de/dstar/doc/HOWTO.html#build.sh-and-cron-autobuild.sh"><code>CORPUS_ROOT/build/build.sh -update</code></a>, i.e. <a href="https://kaskade.dwds.de/dstar/doc/talks/corpus-ops-2019/#howto-update">incremental corpus update</a></p>

<h3 id="update-meta">update-meta</h3>

<p>Updates metadata for an existing corpus index in <a href="#C-CORPUS_ROOT"><code>CORPUS_ROOT/build</code></a> from TEI-XML sources in <a href="#S-CORPUS_SRC"><code>CORPUS_SRC/</code></a>. This is basically a wrapper for <a href="https://kaskade.dwds.de/dstar/doc/HOWTO.html#Corpus-Checkout"><code>dstar-checkout-corpus.sh</code></a> and <a href="https://kaskade.dwds.de/dstar/doc/HOWTO.html#build.sh-and-cron-autobuild.sh"><code>CORPUS_ROOT/build/build.sh -update-meta</code></a>, i.e. <a href="https://kaskade.dwds.de/dstar/doc/HOWTO_build.html#Consistency-Testing">corpus metadata update</a>.</p>

<h3 id="test">test</h3>

<p>Runs automated consistency tests for an existing corpus build in <code><a href="#C-CORPUS_ROOT">CORPUS_ROOT</a>/build/test/</code>. This is basically a wrapper for <a href="https://kaskade.dwds.de/dstar/doc/HOWTO.html#Corpus-Checkout"><code>dstar-checkout-corpus.sh</code></a> and <a href="https://kaskade.dwds.de/dstar/doc/HOWTO.html#build.sh-and-cron-autobuild.sh"><code>CORPUS_ROOT/build/build.sh -test</code></a>, i.e. <a href="https://kaskade.dwds.de/dstar/doc/HOWTO.html#Consistency-Tests">corpus consistency tests</a>.</p>

<h3 id="archive-build">archive-build</h3>

<p>Archives an existing <code><a href="#C-CORPUS_ROOT">CORPUS_ROOT</a>/build/</code> to <a href="#dstar_archive_dir"><code>${dstar_archive_dir}</code></a> if set, otherwise to the (corpus-specific) directory specified by the <code>ARC_BUILD_DIR</code> dstar make variable; usually <code><a href="#C-CORPUS_ROOT">CORPUS_ROOT</a>/archive/</code>.</p>

<h3 id="archive-publish">archive-publish</h3>

<p>Archives publishable corpus data from <code><a href="#C-CORPUS_ROOT">CORPUS_ROOT</a>/build/</code> to <a href="#dstar_archive_dir"><code>${dstar_archive_dir}</code></a> if set, otherwise to the (corpus-specific) directory specified by the <code>ARC_PUBLISH_DIR</code> dstar make variable; usually <code><a href="#C-CORPUS_ROOT">CORPUS_ROOT</a>/archive/</code>.</p>

<h3 id="install">install</h3>

<p>Installs an existing corpus index from <code><a href="#C-CORPUS_ROOT">CORPUS_ROOT</a>/build/</code> to <code><a href="#C-CORPUS_ROOT">CORPUS_ROOT</a>/{server,web}/</code> within the running <code>dstar-buildhost</code> container.</p>

<h3 id="publish">publish</h3>

<p>Deploy an existing corpus index from <code><a href="#C-CORPUS_ROOT">CORPUS_ROOT</a>/build/</code> to production host(s) as selected by the dstar make variables <code>PUBLISH_DEST</code> and/or <code>WEB_PUBLISH_DEST</code>.</p>

<h3 id="run">run</h3>

<p>Runs a <a href="#c-CORPUS"><code>CORPUS</code></a> instance from <code><a href="#C-CORPUS_ROOT">CORPUS_ROOT</a>/{server,web}/</code> in the temporary container. For this action, you will probably also want to specify <a href="#p-HTTP_PORT"><code>-p HTTP_PORT</code></a>. If specified, this must be the last container action executed.</p>

<h3 id="exec-CMD">exec CMD</h3>

<p>Just executs <code>CMD...</code> in the subordinate container. If specified, this must be the final container action executed. Use with <b>extreme caution</b>.</p>

<h2 id="Container-Environment-Variables">Container Environment Variables</h2>

<p>The following environment variables influence operations in the subordinate <code>dstar-buildhost</code> container:</p>

<h3 id="SSH_AUTH_SOCK">SSH_AUTH_SOCK</h3>

<p>The communication socket for <a href="#ssh-agent">ssh-agent</a> on the docker host will be bind-mounted into the container as <code>/tmp/ssh-auth-gantry.sock</code>. The embedded <code>/dstar/docker/build</code> script will typically take care of wrapping that socket as <code>/tmp/ssh-agent-wrap.sock</code>, to ensure appropriate permissions for the build <a href="#u-USER">USER</a> and <a href="#g-GROUP">GROUP</a> within the container itself.</p>

<h3 id="dstar_init_hooks">dstar_init_hooks</h3>

<p>Default initialization hook directory for the embedded <code>/dstar/docker/build</code> script; typically empty. If you need to perform additional actions on the container startup, you can set this variable to the container path of a (mounted) directory containing hooks appropriate for the <a href="https://manpages.debian.org/buster/debianutils/run-parts.8.en.html"><code>run-parts</code></a> system utility. If no <code>INIT_HOOK_DIR(s)</code> are specified on the command-line or by this environment variable, hooks are run from any directory matching</p>

<pre><code> /home/ddc-dstar/dstar/docker/build.d/
 /opt/dstar-build*/</code></pre>

<h3 id="dstar_build_uid">dstar_build_uid</h3>

<p>Numeric UID of build user; should be automatically populated by gantry from the <a href="#u-USER">&quot;-u USER&quot;</a> option. If no user with this UID exists in the container (likely), a temporary user <code>dstar-build</code> will be created during container startup.</p>

<h3 id="dstar_build_gid">dstar_build_gid</h3>

<p>Numeric GID of build group; should be automatically populated by gantry from the <a href="#g-GROUP">&quot;-g GROUP&quot;</a> option. If no group with this GID exists in the container (likely), a temporary group <code>dstar-build</code> will be created during container startup and the <code><a href="#dstar_build_uid">dstar_build_uid</a></code> user approrpriately modified.</p>

<h3 id="dstar_build_umask">dstar_build_umask</h3>

<p>Specifies the permissions umask for the build process. The default is typically specified in the <code>dstar-buildhost</code> docker image itself as <code>002</code>, which creates new files with the group-writable flag set. If you&#39;re feeling paranoid, you can set this to <code>022</code> or even <code>077</code>, but you may encounter problems down the line.</p>

<h3 id="dstar_corpora">dstar_corpora</h3>

<p>Specifies the corpus or corpora to operate on as a whitespace-separated list. Typcically set by <code>dstar-gantry.sh</code> itself to <a href="#c-CORPUS"><code>CORPUS</code></a>. You probably don&#39;t want to set this yourself.</p>

<h3 id="dstar_corpus">dstar_corpus</h3>

<p>Alias for <a href="#dstar_corpora">&quot;dstar_corpora&quot;</a>.</p>

<h3 id="dstar_archive_dir">dstar_archive_dir</h3>

<p>Target directory for <a href="#archive-build"></a> and <a href="#archive-publish"></a> actions. Empty (unset) by default.</p>

<h3 id="dstar_sync_resources">dstar_sync_resources</h3>

<p>Whether or not to synchronize CAB resources to <a href="#R-RESOURCES_DIR"><code>RESOURCES_DIR</code></a> on container startup. Accepts values <code>auto</code> (default), <code>no</code>, and <code>force</code>. The default value (<code>auto</code>) will only attempt to synchronize resources if <a href="#R-RESOURCES_DIR"><code>RESOURCES_DIR</code></a> is not mounted <a href="#RO">read-only</a>.</p>

<h3 id="dstar_sync_rcfiles">dstar_sync_rcfiles</h3>

<p>Specifies which CAB resources in <a href="#R-RESOURCES_DIR"><code>RESOURCES_DIR</code></a> are to by synchronized on container startup. If set and non-empty, overrides that value of the dstar make variable <code>CABRC_FILES</code> for the implicit <code>make -C /dstar/resources sync</code> syncronization call. Empty by default, which uses the default value for <code>CABRC_FILES</code>, and should cause all default CAB resources to be synchronized.</p>

<h3 id="dstar_checkout_corpus_opts">dstar_checkout_corpus_opts</h3>

<p>Specifies options for <a href="https://kaskade.dwds.de/dstar/doc/HOWTO.html#Corpus-Checkout"><code>dstar-checkout-corpus.sh</code></a> as implicitly called prior to any corpus operation. Default: <code>-force -local-config</code>.</p>

<h3 id="dstar_build_sh_opts">dstar_build_sh_opts</h3>

<p>Specifies options for <a href="https://kaskade.dwds.de/dstar/doc/HOWTO.html#build.sh-and-cron-autobuild.sh"><code>CORPUS_ROOT/build/build.sh -build</code></a>. Default: <code>-echo-preset=make-info</code>.</p>

<h3 id="dstar_cabx_run">dstar_cabx_run</h3>

<p>Specifies which CAB server(s) to start in the container for the <a href="#run"></a> action as a whitespace-separated list. CAB server(s) are identified by the file basename up to the first dot (&quot;.&quot;) of the corresponding configuration file <code>/dstar/cabx/*.rc</code>. Default: <code>dstar-http-9096</code>. Known values:</p>

<pre><code> dstar-http-9096       - runtime expansion for synchronic German
 dstar-http-dta-8088   - runtime expansion for historical German
 dstar-http-dta-9099   - &quot;public&quot; web-service for historical German
 dstar-http-en-9097    - runtime expansion for synchronic English
 dstar-http-taghx-9098 - runtime lemma-equivalence using TAGH</code></pre>

<h3 id="dstar_relay_conf">dstar_relay_conf</h3>

<p>Specifies container path containing <a href="https://linux.die.net/man/1/socat"><code>socat</code></a> relay configuration for <code>/dstar/init/dstar-relay.sh</code>. Empty by default, which starts no relays. This option is useful for workstations with insufficient resources to run embedded <a href="#dstar_cabx_run">CAB expansion servers</a> locally, or in situations where <a href="#R-RESOURCES_DIR"><code>RESOURCES_DIR</code></a> is not fully populated in order to bind &quot;virtual&quot; local ports which forward all requests to a remote server daemon (e.g. <code>data.dwds.de:9096</code> for the CAB expansion server <code>dstar-http-9096</code>). It can also be useful for testing &quot;metacorpora&quot; in a container without having to run all daughter corpora in the container as well; in this case, relays should be defined for each immediate daughter node of the metacorpus to be run.</p>

<p>See <a href="http://odo.dwds.de/websvn/filedetails.php?repname=D%2A%3A+Dev-Repository&amp;path=%2Fddc-dstar%2Ftrunk%2Finit%2Fetc_default_dstar_relay"><code>dstar-buildhost:/dstar/init/etc_default_dstar_relay</code></a> for syntax and more details.</p>

<h3 id="VAR">VAR</h3>

<p>All environment variables are passed down to child processes (e.g. <a href="https://kaskade.dwds.de/dstar/doc/HOWTO.html#dstar-nice-sh"><code>dstar-nice.sh</code></a>, <code>make</code>); see <a href="https://kaskade.dwds.de/dstar/doc/README_build.html#Customizable-Variables">&quot;Customizable Variables&quot; in <code>README_build.txt</code></a> for more (non-exhaustive) details.</p>

<h1 id=""></h1>

<h2 id="Gantry-Configuration-Variables">Gantry Configuration Variables</h2>

<p>The following shell variables are used internally by the <code>dstar-gantry.sh</code> script, and may be set or modified by <a href="#f-RCFILE">configuration file(s)</a>. Default values are shown where appropriate, but may differ in some situations (e.g. running via sudo).</p>

<pre><code> ##--------------------------------------------------------------
 ## globals
 DSTAR_ROOT=~/dstar
 gantry_root=$(dirname &quot;$0&quot;)/..
 gantry_docker_registry_path=/dstar
 gantry_gc_filter=&quot;-f dangling=true -f label=de.dwds.project.name=dstar-buildhost&quot;
 
 ##--------------------------------------------------------------
 ## gantry options
 gantry_dry_run=&quot;&quot;
 gantry_docker_image=&quot;lex.dwds.de:443/dstar/dstar-buildhost:latest&quot;
 gantry_corpus=&quot;&quot;
 gantry_corpus_root=&quot;&quot; #$DSTAR_ROOT/corpora/$gantry_corpus
 gantry_corpus_src=&quot;&quot;  #$DSTAR_ROOT/sources/$gantry_corpus/current
 gantry_cabdir=&quot;&quot;      #$DSTAR_ROOT/resources
 gantry_cabdir_ro=&quot;&quot;
 gantry_cabrun=&quot;dstar-http-9096&quot;
 gantry_http_port=&quot;&quot;
 gantry_user=$(id -un ddc-admin)
 gantry_group=$(id -gn ddc-admin)
 
 ##--------------------------------------------------------------
 ## docker options
 extra_docker_opts=()
 
 ##--------------------------------------------------------------
 ## build args
 extra_build_args=()</code></pre>

<h1 id="EXAMPLES">EXAMPLES</h1>

<h2 id="TODO-CONTINUE-HERE">TODO CONTINUE HERE</h2>

<h1 id="CAVEATS">CAVEATS</h1>

<h2 id="docker-storage-drivers">docker storage drivers</h2>

<p>Problems with runtime cross-layer copy operations have been observed using the <code>overlay2</code> docker storage driver, which is the default in recent version of the <code>docker-ce</code> package. The <code>aufs</code> docker storage driver does not exhibit these problemes; see <a href="https://docs.docker.com/storage/storagedriver/aufs-driver/">https://docs.docker.com/storage/storagedriver/aufs-driver/</a> for details. Typically, the <code>aufs</code> driver can be enabled by editing the file <i>/etc/docker/daemon.json</i> to contain:</p>

<pre><code> {
  &quot;storage-driver&quot;:&quot;aufs&quot;
 }</code></pre>

<p>... and re-starting any docker services on the host machine.</p>

<h2 id="build-responsibly">build responsibly</h2>

<p>If you build a corpus with <code>dstar-gantry</code> in a non-standard location and/or on a non-production host, you implicitly assume all resonsibility for keeping track of the intermediate build files in <code><a href="#C-CORPUS_ROOT">CORPUS_ROOT</a>/build/</code>. Deploying only a corpus runtime instance to &quot;production&quot; hosts by means of the <a href="#publish">&quot;publish&quot;</a> action is <b>not</b> sufficient to allow integration of new dstar functionality or to enable many bug-fixes. You are free to delete or archive corpus build directories once you&#39;re done with them, but this is likely to make more work for everyone (yourself included) down the road.</p>

<h2 id="log-changes">log changes</h2>

<p>When making changes to a corpus configuration in SVN, remember to log any changes to <a href="https://kaskade.dwds.de/dstar/doc/HOWTO.html#doc%2FChanges.txt">DSTAR_ROOT/doc/Changes.txt</a>. If you are using a <code>CORPUS_ROOT/config.local/</code> directory for corpus configuration outside of version control, remember to <a href="#build-responsibly">&quot;build responsibly&quot;</a>, and seriously consider checking the final configuration into version control.</p>

<h1 id="SEE-ALSO">SEE ALSO</h1>

<ul>

<li><p>The <a href="https://kaskade.dwds.de/dstar/doc/README.html"><code>dstar/doc/README.txt</code></a> and the references mentioned therein describe the D* framework in more detail. Most of the D* documentation available under <a href="https://kaskade.dwds.de/dstar/doc/">D* README</a> predates the existence of <code>dstar-gantry</code> and of the <code>dstar-buildhost</code> image itself, and in the context of <code>dstar-gantry</code> should be interpreted relative to the running <code>dstar-buildhost</code> container.</p>

</li>
<li><p><a href="https://kaskade.dwds.de/dstar/doc/README_sources.html"><code>dstar/doc/README_sources.txt</code></a> contains details on corpus source TEI-XML conventions.</p>

</li>
<li><p><a href="https://kaskade.dwds.de/dstar/doc/README_ssh.html"><code>dstar/doc/README_ssh.txt</code></a> may provide some help setting up a new ssh identity. Note that <code>dstar-gantry</code> requires an accessible <code>ssh-agent</code>, so if you want to run <code>dstar-gantry</code> on your local workstation or some other non-production host, you may need to <a href="https://kaskade.dwds.de/dstar/doc/README_ssh.html#Manual-ssh-agent-daemon">run ssh-agent manually</a>.</p>

</li>
<li><p><a href="https://kaskade.dwds.de/dstar/doc/Changes.html"><code>dstar/doc/Changes.txt</code></a> contains a manual log of D*-related changes.</p>

</li>
<li><p>See the <a href="https://docs.docker.com/engine/reference/run/"><code>docker-run</code></a> manpage for details on docker options.</p>

</li>
</ul>

<h1 id="AUTHOR">AUTHOR</h1>

<p>Bryan Jurish &lt;jurish@bbaw.de&gt; created the ddc-dstar corpus administration system and the <code>dstar-gantry</code> wrappers.</p>


</body>

</html>


